import CustomCallout from "../../../components/CustomCallout/CustomCallout";

TODO: clean this up, have a clear walkthrough in "Create Pipeline" with examples for all cases we expect people to use. Add cURLs to others.

# Data Pipelines

<CustomCallout type="info">
  To see this API in action, visit our [API Playground](https://developer.mixpanel.com/reference/create-warehouse-pipeline).
</CustomCallout>

The Data Pipelines API contains a list of endpoints that are supported by Mixpanel that help you create and manage your data pipelines. Read our [Data Pipelines guide](/docs/other-bits/data-pipelines) for a full overview.


## Create Pipeline
This request creates an export pipeline. The `type` parameter defines the kind of pipeline that is initiated.

TODO add examples

``` sh
curl --request POST \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/create \
     --header 'accept: application/json' \
     --header 'content-type: application/x-www-form-urlencoded' \
     --data type=gcs-raw \
     --data trial=false \
     --data data_source=events \
     --data frequency=daily \
     --data data_format=json \
     --data gcs_region=northamerica-northeast1
```

## Edit Pipeline
This request edit the params for an export pipeline.

```sh
curl --request POST \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/edit \
     --header 'accept: application/json' \
     --header 'content-type: application/x-www-form-urlencoded'
```

## List Pipeline Logs
This endpoint returns the timestamps of all syncs grouped by date.

```sh
curl --request GET \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/timeline \
     --header 'accept: application/json'
```


## List Pipelines
This API endpoint returns a list of all pipelines in a project.

```sh
curl --request GET \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/jobs \
     --header 'accept: application/json'
```

## Get Pipelines
Given the name of the pipeline this API returns the status of the
pipeline. It returns the summary and status of all the recent run export
jobs for the pipeline.

```sh
curl --request GET \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/status \
     --header 'accept: application/json'
```


**Example Response:** Status with no Summary and a Filter

```curl
curl https://data.mixpanel.com/api/2.0/nessie/pipeline/status \
  -u API_SECRET: \
  -d name="YOUR_PIPELINE_NAME" \
  -d status="running"
```

**Example Response:** Status with no Summary and a Filter

```json
{
  "canceled": [
    {
      "name": "company-july-2016-backfill-hourly-monoschema",
      "state": "canceled",
      "last_finish": "0000-12-31T16:00:00-08:00",
      "run_at": "2016-07-26T00:00:00-07:00",
      "from_date": "2016-07-26T00:00:00-07:00",
      "to_date": "2016-07-26T00:00:00-07:00"
    },
}
```

## Delete Pipeline
For a given pipeline name, this request deletes the pipeline and stops any future jobs to be scheduled for the pipeline. Deleting the pipeline will result in the loss of all its historical data. If you wish to retain the history, it is recommended to pause the pipeline instead.

```sh
curl --request POST \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/cancel \
     --header 'accept: application/json' \
     --header 'content-type: application/x-www-form-urlencoded'
```

## Resume Pipeline
For a given pipeline name, this request resumes the pipeline if it's paused---

```sh
curl --request POST \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/pause \
     --header 'accept: application/json' \
     --header 'content-type: application/x-www-form-urlencoded'
```

## Pause Pipeline
Pause a currently running pipeline.

```sh
curl --request POST \
     --url https://data.mixpanel.com/api/2.0/nessie/pipeline/resume \
     --header 'accept: application/json' \
     --header 'content-type: application/x-www-form-urlencoded'
```
